{
  "$schema": "https://json.schemastore.org/claude-code-settings.json",
  "permissions": {
    "defaultMode": "bypassPermissions",
    "deny": [
      "Read(.env)",
      "Read(.env.local)",
      "Read(.env.production)"
    ]
  },
  "hooks": {
    "SessionStart": [
      {
        "matcher": "compact",
        "hooks": [
          {
            "type": "command",
            "command": "bash $CLAUDE_PROJECT_DIR/.claude/hooks/reinject-context.sh",
            "timeout": 10
          }
        ]
      },
      {
        "matcher": "startup",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'Multi-agent workspace loaded. Skills: /orchestrateur, /backend-dev, /frontend-dev, /admin-sys, /devops, /testeur, /reviewer, /stabilizer, /manager, /init-project, /next-feature'",
            "timeout": 5
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "bash $CLAUDE_PROJECT_DIR/.claude/hooks/protect-files.sh",
            "timeout": 5
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "prompt",
            "prompt": "Did the user ask to implement a feature or modify code? If yes, check that the stabilizer was mentioned or that stability checks (build, tests, deploy) were executed. If checks were not done and there were significant code modifications, respond {\"ok\": false, \"reason\": \"Run /stabilizer before finishing\"}. If checks were done or the request was not about code, respond {\"ok\": true}."
          }
        ]
      }
    ]
  }
}
